language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: lUo6AzjNoIyNp0g5jWHeJ6iYn1xiZvtNMUjC0y9tl839H5Vck7Pvestqbtx3KtYI/1+o7iiggNI9CKzhZ3ce4/VzQ5a7WYatgDKmGhfrv3iWO7CSkhd8CNQ0GWDCMj5c5MGiVWx4NUW1BO0RXn8CRRt8oS+IjrKbKVgP/9JH2pMdM30a7yfcUcTBUrz4cn1vC7l8yqlBDD0g/64cmBNr6L3W8dIVYqXLEtRNAKQeMNL2zoFipn4DyOFgK0sFtfolkjGPE8UruuqlhwxjoqD6TsKdnw0K4Z1OwNF0is8lCxhZZ9vMpQw1orw6QitXd4kRqJ1JNxvWhJ6H6K9w1qFlKjBQooxQ+Tl24xU8lrZIEfbCCvp/JdpTgBsoxCJSVR2V/SDa6/f7QtwvL1xil+hqTVlHRO6+2J7bScAA0tlxZ4j81VqetqWR8uCdZHq75oVDDZVcHeSlbYRKXqw9i1Bep1Bu5Od2ulSvhFrEBVl0VjYDS1yprUlwj+RDpx9Tzg17v5RA1mMgqqTFGM48JnLeSyWzhDrrp7uRTNGzaByZLpanmhbYPAiVyFFdLuPASI9n46jxHnZ8FiJqiGr23Lf6jD9IvVXujK0/sIDOcsMXH6yhKvB5M91PdAMdGbzKeVe7VnLXFYDpk2XIZSKUoMqrPh+B/WcLEeZnjIxlsdZ/btw=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
